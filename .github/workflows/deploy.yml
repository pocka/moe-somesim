name: ãƒ‡ãƒ—ãƒ­ã‚¤

on:
  push:
    branches:
      - master

jobs:
  deloy-ghpages:
    name: GitHub Pages ã¸ãƒ‡ãƒ—ãƒ­ã‚¤
    runs-on: ubuntu-latest
    steps:
      - name: "ğŸ“¦ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ"
        uses: actions/checkout@v3

      - name: "ğŸ“¦ Node.jsã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"
        uses: actions/setup-node@v3

      - name: "ğŸ“¦ npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
        run: npm ci

      - name: "ğŸ“¦ Elmã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"
        uses: jorelali/setup-elm@v3

      - name: "ğŸ› ï¸ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ“ãƒ«ãƒ‰"
        # NOTE: ãƒªãƒã‚¸ãƒˆãƒªåã‚’å¤‰ãˆãŸéš›ã¯ `--base=` ã®å€¤ã‚’å¤‰ãˆã‚‹å¿…è¦ãŒã‚ã‚‹
        run: npm run build -- --base=/moe-somesim/

      - name: "ğŸš€ GitHub Pages ã¸ãƒ‡ãƒ—ãƒ­ã‚¤"
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
